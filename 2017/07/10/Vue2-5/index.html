<!DOCTYPE html><html lang="zh-CN"><head><meta charset="utf-8"><meta name="X-UA-Compatible" content="IE=edge, chrome=1"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"><meta name="keywords" content="river,前端,设计,前端开发,用户体验,设计,frontend,design,nodejs,JavaScript"><link rel="stylesheet" href="//cdn.bootcss.com/font-awesome/4.7.0/css/font-awesome.min.css"><link rel="stylesheet" href="/css/style.css"><link rel="icon" href="/images/favicon.ico"><link rel="stylesheet" href="//cdn.bootcss.com/font-awesome/4.7.0/css/font-awesome.min.css"><title>Vue2.0多页签应用（5）- 规范／扩展</title><meta name="keywords" content="Vue"><body><div class="container"><div class="nav"><ul><li class="item"><a href="/">主页</a></li><li class="item"><a href="/archives">归档</a></li><li class="item"><a href="/about/">关于</a></li></ul></div><article><header><h1 class="title">Vue2.0多页签应用（5）- 规范／扩展</h1><i class="icon-calendar"></i><span>2017.07.10</span></header><div class="content"><p>制定一些基本的规范，对后期的维护和理解很有帮助<br><a id="more"></a></p>
<h3 id="css目录结构"><a href="#css目录结构" class="headerlink" title="css目录结构"></a>css目录结构</h3><pre><code>.
├── src
    ├── css
    │   ├── index.styl              # 引入所有的文件
    │   ├── reset.styl              # 初始化样式
    │   ├── define.styl             # 全局变量
    │   ├── common.styl             # 全局样式
    │   ├── mixins.styl             # 混入
    │   ├── icons.styl              # icons
    │   ├── table.styl              # table
    │   ├── button.styl             # button
</code></pre><p>上面借鉴了Bootstrap的目录划分</p>
<h3 id="css命名规范"><a href="#css命名规范" class="headerlink" title="css命名规范"></a>css命名规范</h3><p>用过 Element 会注意到其默认主题，CSS 命名采用的是 BEM 的风格</p>
<ul>
<li>BEM（或BEM的变体）是一个非常强大命名约定，以至于让你的前端代码更容易阅读和理解，更容易协作，更容易控制，更加健壮和明确而且更加严密；</li>
<li><p>个人推荐团队合作中在公共样式／公共组件上使用 BEM + 命名空间的风格，以提高代码的复用率，而项目的业务组件／私有样式，可以使用页面名-功能名这样的方式；</p>
<pre><code>/**
*   BEM的命名规矩很容易记：block-name__element-name--modifier-name
*   1.即模块名 + 元素名 + 修饰器名
*   [块] =&gt; .block{}
*   [块]__[元素] =&gt; .block__element{}
*   [块]--[修饰符] =&gt;  .block--modifier{}
*   [eg]:
*   Html部分：
*    &lt;form&gt;
*       &lt;input type=&quot;text&quot;&gt;
*       &lt;input type=&quot;submit&quot;&gt;
*    &lt;/form&gt;
*   使用BEM风格的css：
*    .form { }
*    .form--theme-xmas { }
*    .form--simple { }
*    .form__input { }
*    .form__submit { }
*    .form__submit--disabled { }
*
*   2.命名空间
*    o-：表示一个对象（Object），如 .o-layout。
*    c-：表示一个组件（Component），指一个具体的、特定实现的 UI。如 .c-avatar。
*    u-：表示一个通用工具（Utility），如 .u-hidden。
*    t-：表示一个主题（Theme），如 .t-light。
*    s-：表示一个上下文或作用域（Scope），如 .s-cms-content。
*    is-，has-：表示一种状态或条件样式。如 .is-active
*    _：表示一个 hack，如 ._important。
*    js-：表示一个 JavaScript 钩子。如 .js-modal。
*    qa-：表示测试钩子。
*/
</code></pre><p>在项目中使用stylus预处理器处理BEM的命名规范，可以提升我们开发的效率<br>例如，可以使用&amp;符简化</p>
<pre><code>.form
   width 12rem
   height 6rem
   &amp;__input
      font-size 16px
   &amp;__submit
      background blue
      &amp;--disabled
         background gray
</code></pre><p>编译后：</p>
<pre><code>.form {
   width: 12rem;
   height: 6rem;
}
.form__input {
   font-size: 16px;
}
.form__submit {
   background: blue;
}
.form__submit--disabled {
   background: gray;
}
</code></pre><p>运用@extend</p>
<pre><code>.nav
  background blue
  &amp;__item
    color white
    &amp;--active {
      @extend .nav__item
      border 1px solid red
</code></pre></li>
</ul>
<p>前面学习了vue-cli的一些相关的知识，下面开始正式对项目进行一些扩展</p>
<p>1.我们可以使用预处理器来构建简洁和功能更丰富的组件，例如stylus，pug语法，我们需要再“加工”一下配置<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">$ cd asset2</div><div class="line"># 安装stylus，pug</div><div class="line"># 模块名将被添加到devDependencies</div><div class="line">$ npm i pug stylus stylus-loader -D</div></pre></td></tr></table></figure></p>
<p>  效果</p>
<pre><code>&lt;template lang=&quot;pug&quot;&gt;
  .page
&lt;/template&gt;

&lt;style lang=&quot;stylus&quot; scoped&gt;
  .page
    display block
&lt;/style&gt;
</code></pre><p>  <a href="http://html2jade.org/" target="_blank" rel="external">html在线转换jade</a></p>
<p>  如果编译的过程出现 Pug 报错：Invalid indentation,you can use tabs or spaces but not both问题，可以按如下方法解决</p>
<ul>
<li>在webstorm中设置方法如下：preference-&gt;Code Style-&gt;jade-&gt;Tabs and Indents-&gt;勾选Use Tab charactor</li>
<li>然后，点 view-&gt;Active Editor-&gt;Show Whitespaces，这样就很方便地查看哪里的空格有问题了</li>
</ul>
<ol>
<li><p>和服务端通信发送请求获取数据依赖的是axios</p>
<pre><code>$ npm install axios -S
$ npm install qs -D
</code></pre><p>实现的功能特点<br>＊ 可以从浏览器端发起XMLHttpRequests请求<br>＊ node端发起http请求<br>＊ 支持Promise API<br>＊ 监听请求和响应<br>＊ 转化请求和返回响应数据<br>＊ 取消请求<br>＊ JSON数据自动转化<br>＊ 客户端支持防御CSRF攻击</p>
<p>为了更好处理需要封装下, 做一些预处理</p>
</li>
<li><p>安装其他需要的组件vue-router，vuex</p>
<pre><code>$ npm install vue-router
$ npm install vuex
</code></pre></li>
<li><p>安装基于 Vue 2.0 的组件库 Element</p>
<pre><code>$ npm i element-ui -S
# 安装成功
asset2@1.0.0
└─┬ element-ui@1.2.8
  ├── async-validator@1.6.8
  ├── babel-helper-vue-jsx-merge-props@2.0.2
  ├── deepmerge@1.3.2
  └── throttle-debounce@1.0.1
</code></pre><p>完整引入 Element<br>在 package.json 相应的位置加入：</p>
<pre><code>&quot;devDependencies&quot;: {
  &quot;css-loader&quot;: &quot;^0.23.1&quot;,
  &quot;file-loader&quot;: &quot;^0.8.5&quot;,
  &quot;style-loader&quot;: &quot;^0.13.1&quot;,
}
</code></pre><p>然后 npm install 安装新加入的预处理，已经有安装，则不需要重复安装<br>再在 main.js 中写入以下内容</p>
<pre><code>import Vue from &apos;vue&apos;
import router from &apos;./router&apos;
import ElementUI from &apos;element-ui&apos;
import &apos;element-ui/lib/theme-default/index.css&apos;

Vue.config.productionTip = false

Vue.use(ElementUI)

new Vue({
  router
}).$mount(&apos;#app&apos;)
</code></pre></li>
</ol>
</div></article><div id="disqus_thread"></div><div id="disqus_proxy_thread"></div><script>window.disqusProxy = {
  username: 'ciqu',
  server: 'disqus-proxy.ycwalker.com',
  port: '443',
  defaultAvatar: '/avatars/default-avatar.png',
  adminAvatar: '/avatars/admin-avatar.jpg',
  identifier: "2017/07/10/Vue2-5/"
};
window.disqus_config = function () {
  this.page.url = "http://yoursite.com/2017/07/10/Vue2-5/";
  this.page.identifier = "2017/07/10/Vue2-5/";
};
window.onload = function () {
  var s = document.createElement('script');
  s.src = '/static/js/main.0d0338ae.js';
  s.async = true;
  document.body.appendChild(s);
};</script><link rel="stylesheet" href="/static/css/main.0603c539.css"></div></body><script>var _hmt = _hmt || []
;(function () {
  var hm = document.createElement("script")
  hm.src = "https://hm.baidu.com/hm.js?ad593ccdd2ffe5cf791b35fee21d343d"
  var s = document.getElementsByTagName("script")[0]
  s.parentNode.insertBefore(hm, s)
})()</script></head></html>