<!DOCTYPE html><html lang="zh-CN"><head><meta charset="utf-8"><meta name="X-UA-Compatible" content="IE=edge, chrome=1"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"><meta name="keywords" content="river,前端,设计,前端开发,用户体验,设计,frontend,design,nodejs,JavaScript"><link rel="stylesheet" href="//cdn.bootcss.com/font-awesome/4.7.0/css/font-awesome.min.css"><link rel="stylesheet" href="/css/style.css"><link rel="icon" href="/source/images/favicon.ico"><link rel="stylesheet" href="//cdn.bootcss.com/font-awesome/4.7.0/css/font-awesome.min.css"><title>Vue2.0 路由配置（vue-router）</title><body><div class="container"><div class="nav"><ul><li class="item"><a href="/">主页</a></li><li class="item"><a href="/archives">归档</a></li><li class="item"><a href="/about/">关于</a></li></ul></div><article><header><h1 class="title">Vue2.0 路由配置（vue-router）</h1><i class="icon-calendar"></i><span>2017.05.22</span></header><div class="content"><p>项目中使用 vue-router 管理各个组件的动态加载，把不同的路由划分成不同的代码块，只有当路由给访问到才去加载相应的组件。具体实现如下：<br><a id="more"></a></p>
<h3 id="1-划分功能区域"><a href="#1-划分功能区域" class="headerlink" title="1.划分功能区域"></a>1.划分功能区域</h3><pre><code>├── 顶部导航栏 [1] — main-navbar
├── 左边菜单栏 [2] — main-sidebar
├── 内容区域       — main_content
    ├── tab标签栏 [3] - main_tab
    ├── 页面容器 [4]
</code></pre><p><img src="https://static.oschina.net/uploads/img/201704/19140907_LfNj.png" alt=""></p>
<p>在Chrome安装vue-devtools，可以清晰地显示各个组件的关系</p>
<p><img src="https://static.oschina.net/uploads/img/201706/06085956_HhXD.png" alt=""><br>可以看出，在index.vue中定义主体框架：其中包含顶部导航mainNav， 左边菜单sideBar，页签管理器mainTab和一个动态页面容器view。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">./src/index.vue</span><br><span class="line">&lt;template lang=&quot;pug&quot;&gt;</span><br><span class="line">  .main</span><br><span class="line">    main-nav</span><br><span class="line">    side-bar</span><br><span class="line">    .main__content</span><br><span class="line">      main-tab</span><br><span class="line">      .main__container</span><br><span class="line">        tab-manager</span><br><span class="line">          router-view</span><br><span class="line">&lt;/template&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">  import mainNav from &apos;components/base/head&apos;</span><br><span class="line">  import sideBar from &apos;components/base/sidebar&apos;</span><br><span class="line">  import mainTab from &apos;components/base/tab&apos;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure></p>
<h3 id="2-创建组件"><a href="#2-创建组件" class="headerlink" title="2.创建组件"></a>2.创建组件</h3><p>我们可以把组件分为：基础组件、业务组件、页面组件</p>
<p>基础组件：与业务低耦合，可复用，例如分页组件<br>业务组件：与业务耦合，部分可复用，例如存量产品弹框<br>页面组件：是组件的容器，将组件组合可以形式一个完整的界面</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">├── components</span><br><span class="line">│   ├── base                 # base</span><br><span class="line">│   └── business             # 业务组件</span><br><span class="line">├── pages                    # 页面组件</span><br><span class="line">│   ├── assetView.vue</span><br><span class="line">├── index.vue</span><br></pre></td></tr></table></figure>
<p>主体框架搭好了，可以在主体框架上堆砌组件</p>
<p>[1.main-nav] 顶部导航栏<br>[2.side-bar] 左边菜单栏<br>[3.main-tab] 页签管理器<br>[4.content]  变化的，通过动态的view加载不同的页面组件</p>
<p>可以看出1.2.3都是一直显示在主体框架的，所以在index.vue直接引用，而页面组件通过 router-view 来动态加载</p>
<p>页面组件代码可以<a href="https://github.com/wsihe/vue-many" target="_blank" rel="noopener">查看项目</a>，就不一一贴出来了</p>
<h3 id="3-路由和配置"><a href="#3-路由和配置" class="headerlink" title="3.路由和配置"></a>3.路由和配置</h3><p>接下来就是配置路由，将组件(components)映射到路由(routes)，然后告诉 vue-router 在哪里渲染它们。因为用到了懒加载，首先把路由对应的组件定义成异步组件<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">const Foo = resolve =&gt; require([&apos;./Foo.vue&apos;], resolve)</span><br></pre></td></tr></table></figure></p>
<p>我们也可以把组件按块级来分配</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">const Foo = r =&gt; require.ensure([], () =&gt; r(require(&apos;./Foo.vue&apos;)), &apos;group-foo&apos;)</span><br><span class="line">const Bar = r =&gt; require.ensure([], () =&gt; r(require(&apos;./Bar.vue&apos;)), &apos;group-foo&apos;)</span><br></pre></td></tr></table></figure>
<p>按主体框架来策划我们的组件：</p>
<ul>
<li>路由 /login       -&gt; 一级路由login.vue</li>
<li>路由 /            -&gt; 一级路由index.vue</li>
<li>路由 /switchDemo   -&gt; 二级路由switchDemo.vue，对应index.vue下的子路由</li>
<li>路由 /paginationDemo   -&gt; 二级路由paginationDemo.vue，对应index.vue下的子路由</li>
<li>路由 /messageDemo   -&gt; 二级路由messageDemo.vue，对应index.vue下的子路由</li>
</ul>
<h3 id="系列链接"><a href="#系列链接" class="headerlink" title="系列链接"></a>系列链接</h3><ul>
<li><a href="/2017/05/27/Vue2-7/" title="Axios 前端实现登录配置">Axios 前端实现登录配置</a></li>
<li><a href="/2017/05/31/Vue2-8/" title="组件通信 (vuex)">组件通信 (vuex)</a></li>
<li><a href="/2017/06/03/Vue2-9/" title="Vue2.0多页签应用 - 页签管理">Vue2.0多页签应用 - 页签管理</a>
</li>
</ul>
</div></article></div></body></head></html>